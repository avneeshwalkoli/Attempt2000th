# Coturn TURN Server Configuration for DeskLink
# Production-ready configuration with security hardening

# Listening port for TURN server
listening-port=3478
tls-listening-port=5349

# Listening IP (0.0.0.0 for all interfaces)
listening-ip=0.0.0.0

# External IP (set to your server's public IP in production)
# external-ip=YOUR_PUBLIC_IP

# Relay IP (internal IP for relaying)
relay-ip=0.0.0.0

# Use fingerprints in TURN messages
fingerprint

# Long-term credential mechanism
lt-cred-mech

# Static user credentials (for testing only - use dynamic credentials in production)
# user=desklink:desklink123

# Shared secret for dynamic credentials (HMAC-based)
# Set this via environment variable TURN_SECRET
use-auth-secret
static-auth-secret=your-turn-secret-change-in-production

# Realm for TURN server
realm=desklink.local

# Total quota (bytes per allocation)
total-quota=100

# Max bandwidth per session (bytes per second)
bps-capacity=0

# Stale nonce (prevent replay attacks)
stale-nonce=600

# Certificate files for TLS (required for production)
# cert=/etc/coturn/cert.pem
# pkey=/etc/coturn/privkey.pem

# Disable TLS and DTLS for local development
# Remove these in production and enable TLS
no-tls
no-dtls

# Logging
log-file=/var/log/coturn/turnserver.log
verbose

# Deny specific peer IPs (security)
no-multicast-peers
no-loopback-peers

# Enable prometheus metrics (optional)
# prometheus

# Mobility support
mobility

# CLI (for management)
cli-ip=127.0.0.1
cli-port=5766
cli-password=desklinkadmin